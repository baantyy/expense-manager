(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(69)},41:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(29),l=a.n(r),c=(a(38),a(22),a(39),a(40),a(41),a(3)),o=a(4),i=a(6),m=a(5),u=a(7),d=a(1),p=a(14),h=a(2),E=a.n(h),g=function(e){function t(e){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).call(this,e))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("roles"));return s.a.createElement(s.a.Fragment,null,this.props.isAuthenticated?s.a.createElement("header",{className:"header"},s.a.createElement("div",{className:"container"},s.a.createElement("nav",{className:"navbar navbar-expand-lg"},s.a.createElement(d.b,{to:"/",className:"navbar-brand"},"Expense Manager"),s.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarMenu"},s.a.createElement("span",null),s.a.createElement("span",null),s.a.createElement("span",null)),s.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarMenu"},s.a.createElement("ul",{className:"navbar-nav ml-auto"},this.props.isAuthenticated?e.includes("admin")?s.a.createElement(s.a.Fragment,null,s.a.createElement("li",{className:"nav-item"},s.a.createElement(d.b,{to:"/admin/expenses",className:"nav-link"},"Expenses")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(d.b,{to:"/admin/categories",className:"nav-link"},"Categories")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(d.b,{to:"/admin/users",className:"nav-link"},"Users")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(d.b,{to:"/logout",className:"nav-link logout"},"Logout"))):s.a.createElement(s.a.Fragment,null,s.a.createElement("li",{className:"nav-item"},s.a.createElement(d.b,{to:"/expenses",className:"nav-link"},"Expenses")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(d.b,{to:"/logout",className:"nav-link logout"},"Logout"))):s.a.createElement(s.a.Fragment,null,s.a.createElement("li",{className:"nav-item"},s.a.createElement(d.b,{to:"/login",className:"nav-link"},"Login")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(d.b,{to:"/register",className:"nav-link"},"Register")))))))):s.a.createElement("div",null))}}]),t}(s.a.Component),f=function(e){function t(e){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).call(this,e))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.history.push("login")}},{key:"render",value:function(){return s.a.createElement("div",null)}}]),t}(s.a.Component),v=a(32),b=a(9),N=function(e){return s.a.createElement("div",{className:"spinner-border"})},S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t={budget:a.state.budget,category:a.state.category,reason:a.state.reason,user:a.state.user,isApproved:a.state.isApproved,colleagues:"Update"===a.props.title?a.state.colleagues:a.state.colleagues.filter(function(e){if(a.state.user!==e.user._id)return{user:e.user._id}})};a.props.handleSubmit(t)},a.handleChange=function(e){e.persist(),a.setState(function(){return Object(b.a)({},e.target.name,e.target.value)})},a.searchUser=function(e){var t=e.target.value;a.setState(function(e){return{searchUserLoaded:!!t.length,filteredUsers:e.availableUsers.filter(function(e){return e.fullname.toLowerCase().includes(t.toLowerCase())})}})},a.selectUser=function(e,t){a.setState(function(a){return{searchUserLoaded:!1,availableUsers:a.availableUsers.filter(function(t){return t._id!==e}),filteredUsers:a.availableUsers.filter(function(t){return t._id!==e}),colleagues:a.colleagues.concat([{user:{_id:e,fullname:t},amountReceived:0}])}})},a.removeSelectedUser=function(e,t){a.setState(function(a){return{availableUsers:a.availableUsers.concat({_id:e,fullname:t}),colleagues:a.colleagues.filter(function(t){return t.user._id!==e})}})},a.amountReceived=function(e){e.persist(),a.setState(function(t){return{colleagues:t.colleagues.map(function(t){return t.user._id===e.target.id?Object(v.a)({},t,{amountReceived:Number(e.target.value)}):t})}})},a.state={budget:e.expense?e.expense.budget:"",category:e.expense?e.expense.category._id:"",reason:e.expense?e.expense.reason:"",user:e.expense?e.expense.user._id:"",colleagues:e.expense?e.expense.colleagues:[],isApproved:!!e.expense&&e.expense.isApproved,errors:{},isLoaded:!1,users:[],availableUsers:[],filteredUsers:[],searchUserLoaded:!1,categories:[],roles:e.roles},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token"),t=this;E.a.all([E.a.get("/api/users/employee",{headers:{"x-auth":e}}),E.a.get("/api/admin/categories",{headers:{"x-auth":e}})]).then(E.a.spread(function(e,a){t.setState(function(t){return{users:e.data,availableUsers:e.data.map(function(e){return t.colleagues.length&&t.colleagues.map(function(e){return e.user._id}).includes(e._id)?{}:e}).filter(function(e){return e._id}),categories:a.data,isLoaded:!0}})}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,this.state.isLoaded?s.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"row"},this.state.roles.includes("admin")?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"col-md-3"},s.a.createElement("label",{className:"label"},"Employee")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("select",{className:"form-control field",name:"user",value:this.state.user,onChange:this.handleChange},s.a.createElement("option",{value:""},"Choose Employee"),this.state.users.map(function(e){return s.a.createElement("option",{key:e._id,value:e._id},e.fullname)}))),s.a.createElement("div",{className:"col-md-5"},this.props.errors.user?s.a.createElement("p",{className:"text-danger"},"ObjectID"===this.props.errors.user.kind?"employee is required":this.props.errors.user.message):""),s.a.createElement("div",{className:"col-md-3"},s.a.createElement("label",{className:"label"},"Budget")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("input",{type:"text",className:"form-control field",placeholder:"Enter Budget",name:"budget",value:this.state.budget,onChange:this.handleChange})),s.a.createElement("div",{className:"col-md-5"},this.props.errors.budget?s.a.createElement("p",{className:"text-danger"},this.props.errors.budget.message):""),s.a.createElement("div",{className:"col-md-3"},s.a.createElement("label",{className:"label"},"Approve")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("select",{className:"form-control field",name:"isApproved",value:this.state.isApproved,onChange:this.handleChange},s.a.createElement("option",{value:"true"},"Yes"),s.a.createElement("option",{value:"false"},"No"))),s.a.createElement("div",{className:"col-md-5"})):"",s.a.createElement("div",{className:"col-md-3"},s.a.createElement("label",{className:"label"},"Category")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("select",{className:"form-control field",name:"category",value:this.state.category,onChange:this.handleChange},s.a.createElement("option",{value:""},"Choose Category"),this.state.categories.map(function(e){return s.a.createElement("option",{key:e._id,value:e._id},e.name)}))),s.a.createElement("div",{className:"col-md-5"},this.props.errors.category?s.a.createElement("p",{className:"text-danger"},"ObjectID"===this.props.errors.category.kind?"category is required":this.props.errors.category.message):""),s.a.createElement("div",{className:"col-md-3"},s.a.createElement("label",{className:"label"},"Reason")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("textarea",{type:"text",rows:"4",className:"form-control field",placeholder:"Enter Reason",name:"reason",value:this.state.reason,onChange:this.handleChange})),s.a.createElement("div",{className:"col-md-5"},this.props.errors.reason?s.a.createElement("p",{className:"text-danger"},this.props.errors.reason.message):""),s.a.createElement("div",{className:"col-md-3"},s.a.createElement("label",{className:"label"},"Colleagues")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("input",{type:"text",className:"form-control field",placeholder:"Choose Colleagues",onChange:this.searchUser}),this.state.searchUserLoaded?s.a.createElement("div",{className:"dropDownSearch"},s.a.createElement("ul",null,this.state.filteredUsers.length?this.state.filteredUsers.map(function(t){return s.a.createElement("li",{key:t._id,onClick:function(){e.selectUser(t._id,t.fullname)}},t.fullname)}):s.a.createElement("li",null,"No User Found"))):"",this.state.colleagues.length?s.a.createElement("div",{className:"selectedUser"},s.a.createElement("ul",null,this.state.colleagues.map(function(t,a){return s.a.createElement("li",{key:a,className:"Update"===e.props.title?"editCol":""},t.user.fullname,s.a.createElement("span",{onClick:function(){e.removeSelectedUser(t.user._id,t.user.fullname)}},"x"),"Update"===e.props.title?s.a.createElement("input",{className:"form-control field",type:"text",placeholder:"Amount Received",onChange:e.amountReceived,value:t.amountReceived,id:t.user._id}):"")}))):""),s.a.createElement("div",{className:"col-md-5"}),s.a.createElement("div",{className:"col-md-3"}),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("button",{className:"btn"},this.props.submitLoading?s.a.createElement("i",{className:"fa fa-spin fa-spinner"}):"".concat(this.props.title," Expense"))))):s.a.createElement("div",{className:"text-center mt-5 mb-5"},s.a.createElement(N,null)))}}]),t}(s.a.Component),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){a.setState(function(){return{submitLoading:!0}});var t=localStorage.getItem("token"),n=a.state.roles.includes("admin")?"/api/admin/expenses":"/api/expenses";E.a.post(n,e,{headers:{"x-auth":t}}).then(function(e){console.log(e.data),e.data.errors?a.setState(function(){return{errors:e.data.errors,submitLoading:!1}}):a.state.roles.includes("admin")?a.props.history.push("/admin/expenses"):a.props.history.push("/expenses")}).catch(function(e){console.log("error",e)})},a.state={submitLoading:!1,errors:{budget:"",category:"",reason:"",user:""},roles:JSON.parse(localStorage.getItem("roles"))},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){document.title="Add Expense",!this.state.roles&&this.props.history.push("/login")}},{key:"render",value:function(){var e=this.state.roles.includes("admin")?"/admin/":"/";return s.a.createElement("div",{className:"expenses"},s.a.createElement("div",{className:"headTitle"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},s.a.createElement("h1",null,"Add Expense")),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"rightBtn"},s.a.createElement(d.b,{to:"".concat(e,"expenses")},"Go Back")))))),s.a.createElement("div",{className:"container"},s.a.createElement(S,{title:"Add",handleSubmit:this.handleSubmit,submitLoading:this.state.submitLoading,errors:this.state.errors,roles:this.state.roles})))}}]),t}(s.a.Component),y=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=localStorage.getItem("id"),n=localStorage.getItem("token");E.a.get("/api/expenses/".concat(a.props.expense._id),{headers:{"x-auth":n}}).then(function(e){for(var n=e.data.colleagues,s=0,r=0;r<n.length;r++)String(n[r].user._id)!==String(t)?s+=n[r].amountSpent:s+=Number(a.state.amountSpent);if(0===a.props.expense.budget||a.props.expense.budget>=s){var l=new FormData;l.append("receipt",a.state.receipt?a.state.receipt:a.state.receiptImg),l.append("amountSpent",a.state.amountSpent),a.props.handleSubmit(l)}else a.setState(function(){return{error:"total spent can't exceed ".concat(a.props.expense.budget)}})})},a.handleChange=function(e){e.persist(),a.setState(function(){return Object(b.a)({},e.target.name,e.target.value)})},a.handleFileChange=function(e){e.persist(),a.setState(function(){return{receipt:e.target.files[0]}})};var n=e.expense.colleagues.find(function(e){return e.user._id===localStorage.getItem("id")});return a.state={amountSpent:n.amountSpent,receipt:n.receipt,receiptImg:n.receipt,currentExpense:{},error:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-3"},s.a.createElement("label",{className:"label"},"Amount Spent")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("input",{type:"text",className:"form-control field",placeholder:"Enter Amount Spent",name:"amountSpent",value:this.state.amountSpent,onChange:this.handleChange})),s.a.createElement("div",{className:"col-md-5"},""!==this.state.error&&s.a.createElement("p",{className:"text-danger"},this.state.error),console.log(this.state.error)),s.a.createElement("div",{className:"col-md-3"},s.a.createElement("label",{className:"label"},"Receipt")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("input",{type:"file",className:"form-control field",name:"receipt",onChange:this.handleFileChange}),s.a.createElement("div",{className:"receiptImg"},"null"!==this.state.receiptImg?s.a.createElement("img",{src:"/uploads/".concat(this.state.receiptImg),alt:"".concat(this.state.receiptImg)}):"")),s.a.createElement("div",{className:"col-md-5"}),s.a.createElement("div",{className:"col-md-3"}),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("button",{className:"btn"},this.props.submitLoading?s.a.createElement("i",{className:"fa fa-spin fa-spinner"}):"Update Expense"))))}}]),t}(s.a.Component),C=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){a.setState(function(){return{submitLoading:!0}});var t=a.props.match.params.id,n=localStorage.getItem("token"),s=a.state.roles.includes("admin")?"/api/admin/expenses/".concat(t):"/api/expenses/".concat(t);E.a.put(s,e,{headers:{"x-auth":n}}).then(function(e){e.data.errors?a.setState(function(){return{submitLoading:!1,errors:e.data.errors}}):a.state.roles.includes("admin")?a.props.history.push("/admin/expenses/view/".concat(t)):a.props.history.push("/expenses/view/".concat(t))})},a.state={submitLoading:!1,errors:{},isLoaded:!1,expense:{},roles:JSON.parse(localStorage.getItem("roles"))},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){document.title="Edit Expense",!this.state.roles&&this.props.history.push("/login")}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,a=localStorage.getItem("token"),n=this.state.roles.includes("admin")?"/api/admin/expenses/".concat(t):"/api/expenses/".concat(t);E.a.get(n,{headers:{"x-auth":a}}).then(function(t){e.setState(function(){return{expense:t.data,isLoaded:!0}})})}},{key:"render",value:function(){var e=this.state.roles.includes("admin")?"/admin/":"/";return s.a.createElement("div",{className:"expenses"},s.a.createElement("div",{className:"headTitle"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},s.a.createElement("h1",null,"Edit Expense")),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"rightBtn"},s.a.createElement(d.b,{to:"".concat(e,"expenses")},"Go Back")))))),this.state.isLoaded?s.a.createElement("div",{className:"container"},this.state.roles.includes("admin")?s.a.createElement(S,{title:"Update",handleSubmit:this.handleSubmit,submitLoading:this.state.submitLoading,errors:this.state.errors,expense:this.state.expense,roles:this.state.roles}):s.a.createElement(y,{handleSubmit:this.handleSubmit,submitLoading:this.state.submitLoading,errors:this.state.errors,expense:this.state.expense})):s.a.createElement("div",{className:"text-center mt-5 mb-5"},s.a.createElement(N,null)))}}]),t}(s.a.Component),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).searchExpense=function(e){var t=e.target.value.toLowerCase();a.setState(function(e){return{searchValue:t,filteredExpenses:e.expenses.filter(function(e){return e.user.fullname.toLowerCase().includes(t)})}})},a.handleDelete=function(e){if(a.state.roles.includes("superadmin")){if(window.confirm("Are you sure")){a.setState(function(){return{deleteLoading:{id:e,status:!0}}});var t=localStorage.getItem("token");E.a.delete("/api/admin/expenses/".concat(e),{headers:{"x-auth":t}}).then(function(t){t.data.expense?a.setState(function(t){return{deleteLoading:{id:"",status:!1},expenses:t.expenses.filter(function(t){return t._id!==e}),filteredExpenses:t.filteredExpenses.filter(function(t){return t._id!==e})}}):a.setState(function(){return{deleteLoading:{id:"",status:!1},formMsg:{css:"danger",msg:"Something Went Wrong !"}}})})}}else window.alert("You don't have permission to delete")},a.state={expenses:[],filteredExpenses:[],searchValue:"",isLoaded:!1,deleteLoading:{id:"",status:!1},formMsg:{css:"",msg:""},roles:JSON.parse(localStorage.getItem("roles"))},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){document.title="All Expenses",!this.state.roles&&this.props.history.push("/login")}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token"),a=this.state.roles.includes("admin")?"/api/admin/expenses":"/api/expenses";E.a.get(a,{headers:{"x-auth":t}}).then(function(t){e.setState(function(){return{expenses:t.data,filteredExpenses:t.data,isLoaded:!0}})})}},{key:"render",value:function(){var e=this,t=this.state.roles.includes("admin")?"/admin/":"/";return s.a.createElement("div",{className:"expenses"},s.a.createElement("div",{className:"headTitle"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},s.a.createElement("h1",null,"Expenses - ",this.state.filteredExpenses.length)),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"rightBtn"},s.a.createElement(d.b,{to:"".concat(t,"expenses/add")},"Add Expense")))))),s.a.createElement("div",{className:"container"},this.state.isLoaded?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6"},this.state.formMsg.msg?s.a.createElement("p",{className:"text-".concat(this.state.formMsg.css)},this.state.formMsg.msg):""),s.a.createElement("div",{className:"col-md-6"},s.a.createElement("form",null,s.a.createElement("input",{className:"form-control search",type:"text",placeholder:"Search Here",onChange:this.searchExpense,value:this.state.searchValue})))),s.a.createElement("div",{className:"tableCover"},s.a.createElement("table",{className:"table table-hover table-bordered"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Sl. No."),s.a.createElement("th",null,"Employee"),s.a.createElement("th",null,"Date"),s.a.createElement("th",null,"Budget"),s.a.createElement("th",null,"Spent"),s.a.createElement("th",null,"Category"),s.a.createElement("th",null,"Reason"),s.a.createElement("th",null,"Status"),s.a.createElement("th",null,"Action"))),s.a.createElement("tbody",null,this.state.filteredExpenses.length?this.state.filteredExpenses.map(function(a,n){var r=0;return a.colleagues.map(function(e){r+=e.amountSpent}),s.a.createElement("tr",{key:a._id},s.a.createElement("td",null,n+1),s.a.createElement("td",null,a.user.fullname),s.a.createElement("td",null,a.createdAt),s.a.createElement("td",null,a.budget),s.a.createElement("td",null,r),s.a.createElement("td",null,a.category.name),s.a.createElement("td",null,a.reason),s.a.createElement("td",null,a.isApproved?s.a.createElement("span",{className:"text-success"},"Approved"):s.a.createElement("span",{className:"text-danger"},"Not Approved")),s.a.createElement("td",null,s.a.createElement(d.b,{title:"Edit",to:"".concat(t,"expenses/edit/").concat(a._id)},s.a.createElement("i",{className:"fa fa-pencil text-dark"})),s.a.createElement(d.b,{title:"View",to:"".concat(t,"expenses/view/").concat(a._id)},s.a.createElement("i",{className:"fa fa-book text-primary"})),e.state.roles.includes("admin")?s.a.createElement("button",{title:"delete",onClick:function(){e.handleDelete(a._id)}},e.state.deleteLoading.id===a._id&&e.state.deleteLoading.status?s.a.createElement("i",{className:"fa fa-spin text-danger fa-spinner"}):s.a.createElement("i",{className:"fa fa-trash text-danger"})):""))}):s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"9",className:"text-center"}," No Expense Found ")))))):s.a.createElement("div",{className:"text-center mt-5 mb-5"},s.a.createElement(N,null))))}}]),t}(s.a.Component),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={isLoaded:!1,expense:{},roles:JSON.parse(localStorage.getItem("roles"))},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){document.title="View Expense",!this.state.roles&&this.props.history.push("/login")}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token"),a=this.props.match.params.id,n=this.state.roles.includes("admin")?"/api/admin/expenses/".concat(a):"/api/expenses/".concat(a);E.a.get(n,{headers:{"x-auth":t}}).then(function(t){e.setState(function(){return{isLoaded:!0,expense:t.data}})})}},{key:"render",value:function(){var e=this.props.match.params.id,t=this.state.expense,a=t.budget,n=t.createdAt,r=t.user,l=t.category,c=t.reason,o=t.isApproved,i=t.colleagues,m=0,u=this.state.roles.includes("admin")?"/admin/":"/";return this.state.isLoaded&&this.state.expense.colleagues.forEach(function(e){m+=e.amountSpent}),s.a.createElement("div",{className:"expenses"},s.a.createElement("div",{className:"headTitle"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-5"},s.a.createElement("h1",null,"View Expense")),s.a.createElement("div",{className:"col-7"},s.a.createElement("div",{className:"rightBtn"},s.a.createElement(d.b,{to:"".concat(u,"expenses")},"Go Back"),s.a.createElement(d.b,{to:"".concat(u,"expenses/edit/").concat(e)},"Edit")))))),s.a.createElement("div",{className:"container"},this.state.isLoaded?s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6"},s.a.createElement("div",{className:"expenseView"},s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("b",null,"Employee")," : ",r.fullname),s.a.createElement("li",null,s.a.createElement("b",null,"Date")," : ",n),s.a.createElement("li",null,s.a.createElement("b",null,"Budget")," : ",a),s.a.createElement("li",null,s.a.createElement("b",null,"Spent")," : ",m),s.a.createElement("li",null,s.a.createElement("b",null,"Category")," : ",l.name),s.a.createElement("li",null,s.a.createElement("b",null,"Reason")," : ",c),s.a.createElement("li",null,s.a.createElement("b",null,"Status")," : ",o?s.a.createElement("span",{className:"text-success"},"Approved"):s.a.createElement("span",{className:"text-danger"},"Not Approved"))))),s.a.createElement("div",{className:"col-lg-6"},s.a.createElement("div",{className:"tableCover"},s.a.createElement("table",{className:"table table-bordered table-hover mt-0"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Sl.No."),s.a.createElement("th",null,"Employee"),s.a.createElement("th",null,"Amount Spent"),s.a.createElement("th",null,"Amount Received"),s.a.createElement("th",null,"Receipt"))),s.a.createElement("tbody",null,i.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,t+1),s.a.createElement("td",null,e.user.fullname),s.a.createElement("td",null,e.amountSpent),s.a.createElement("td",null,e.amountReceived),s.a.createElement("td",null,"null"!==e.receipt?s.a.createElement("a",{href:"/uploads/".concat(e.receipt),target:"_blank",rel:"noopener noreferrer"},s.a.createElement("i",{className:"fa fa-download"})):""))})))))):s.a.createElement("div",{className:"text-center mt-5 mb-5"},s.a.createElement(N,null))))}}]),t}(s.a.Component),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t={fullname:a.state.fullname,username:a.state.username,email:a.state.email,password:a.state.password,roles:[a.state.roles],allowAccess:a.state.allowAccess};a.props.handleSubmit(t)},a.handleChange=function(e){e.persist(),a.setState(function(){return Object(b.a)({},e.target.name,e.target.value)})},a.state={fullname:e.user?e.user.fullname:"",username:e.user?e.user.username:"",email:e.user?e.user.email:"",password:"",roles:e.user?e.user.roles.includes("superadmin")?"superadmin":e.user.roles[0]:"employee",allowAccess:!e.user||e.user.allowAccess,errors:{}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-3"},s.a.createElement("label",{className:"label"},"Fullname")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("input",{type:"text",className:"form-control field",placeholder:"Enter Fullname",name:"fullname",value:this.state.fullname,onChange:this.handleChange})),s.a.createElement("div",{className:"col-md-5"},this.props.errors.fullname?s.a.createElement("p",{className:"text-danger"},this.props.errors.fullname.message):""),s.a.createElement("div",{className:"col-md-3"},s.a.createElement("label",{className:"label"},"Username")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("input",{type:"text",className:"form-control field",placeholder:"Enter Username",name:"username",value:this.state.username,onChange:this.handleChange})),s.a.createElement("div",{className:"col-md-5"},this.props.errors.username?s.a.createElement("p",{className:"text-danger"},this.props.errors.username.message):""),s.a.createElement("div",{className:"col-md-3"},s.a.createElement("label",{className:"label"},"Email")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("input",{type:"text",className:"form-control field",placeholder:"Enter Email",name:"email",value:this.state.email,onChange:this.handleChange})),s.a.createElement("div",{className:"col-md-5"},this.props.errors.email?s.a.createElement("p",{className:"text-danger"},this.props.errors.email.message):""),s.a.createElement("div",{className:"col-md-3"},s.a.createElement("label",{className:"label"},"Password")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("input",{type:"password",className:"form-control field",placeholder:"Enter Password",name:"password",value:this.state.password,onChange:this.handleChange})),s.a.createElement("div",{className:"col-md-5"},this.props.errors.password?s.a.createElement("p",{className:"text-danger"},this.props.errors.password.message):""),s.a.createElement("div",{className:"col-md-3"},s.a.createElement("label",{className:"label"},"Access")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("select",{className:"form-control field",name:"allowAccess",onChange:this.handleChange,value:this.state.allowAccess},s.a.createElement("option",{value:"true"},"Approved"),s.a.createElement("option",{value:"false"},"Not Approved"))),s.a.createElement("div",{className:"col-md-5"},this.props.errors.allowAccess?s.a.createElement("p",{className:"text-danger"},this.props.errors.allowAccess.message):""),s.a.createElement("div",{className:"col-md-3"},s.a.createElement("label",{className:"label"},"Role")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("select",{className:"form-control field",name:"roles",onChange:this.handleChange,value:this.state.roles},s.a.createElement("option",{value:"employee"},"Employee"),s.a.createElement("option",{value:"admin"},"Admin"),JSON.parse(localStorage.getItem("roles")).includes("superadmin")&&s.a.createElement("option",{value:"superadmin"},"Super Admin"))),s.a.createElement("div",{className:"col-md-5"},this.props.errors.roles?s.a.createElement("p",{className:"text-danger"},this.props.errors.roles.message):""),s.a.createElement("div",{className:"col-md-3"}),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("button",{className:"btn"},this.props.submitLoading?s.a.createElement("i",{className:"fa fa-spin fa-spinner"}):"".concat(this.props.title," User"))))))}}]),t}(s.a.Component),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){a.setState(function(){return{submitLoading:!0}});var t=localStorage.getItem("token");E.a.post("/api/admin/users",e,{headers:{"x-auth":t}}).then(function(e){console.log(e.data),e.data.errors?a.setState(function(){return{errors:e.data.errors,submitLoading:!1}}):a.props.history.push("/admin/users")}).catch(function(e){console.log("error",e)})},a.state={submitLoading:!1,errors:{fullname:"",username:"",email:"",password:"",roles:"",allowAccess:""}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){document.title="Add User";var e=JSON.parse(localStorage.getItem("roles"));e?!e.includes("admin")&&this.props.history.push("/login"):this.props.history.push("/login")}},{key:"render",value:function(){return s.a.createElement("div",{className:"expenses"},s.a.createElement("div",{className:"headTitle"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},s.a.createElement("h1",null,"Add User")),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"rightBtn"},s.a.createElement(d.b,{to:"/admin/users"},"Go Back")))))),s.a.createElement("div",{className:"container"},s.a.createElement(w,{title:"Add",handleSubmit:this.handleSubmit,submitLoading:this.state.submitLoading,errors:this.state.errors})))}}]),t}(s.a.Component),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){a.setState(function(){return{submitLoading:!0}});var t=a.props.match.params.id,n=localStorage.getItem("token");E.a.put("/api/admin/users/".concat(t),e,{headers:{"x-auth":n}}).then(function(e){console.log(e.data),e.data.errors?a.setState(function(){return{submitLoading:!1,errors:e.data.errors}}):a.props.history.push("/admin/users")}).catch(function(e){console.log("err",e)})},a.state={submitLoading:!1,errors:{fullname:"",username:"",email:"",password:"",roles:"",allowAccess:""},isLoaded:!1,user:{}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){document.title="Edit User";var e=JSON.parse(localStorage.getItem("roles"));e?!e.includes("admin")&&this.props.history.push("/login"):this.props.history.push("/login")}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,a=localStorage.getItem("token");E.a.get("/api/admin/users/".concat(t),{headers:{"x-auth":a}}).then(function(t){t.data.user&&e.setState(function(){return{user:t.data.user,isLoaded:!0}})}).catch(function(e){console.log("error",e)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"expenses"},this.state.isLoaded?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"headTitle"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},s.a.createElement("h1",null,"Edit User")),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"rightBtn"},s.a.createElement(d.b,{to:"/admin/users"},"Go Back")))))),s.a.createElement("div",{className:"container"},s.a.createElement(w,{title:"Update",handleSubmit:this.handleSubmit,submitLoading:this.state.submitLoading,errors:this.state.errors,user:this.state.user}))):s.a.createElement("div",{className:"text-center mt-5 mb-5"},s.a.createElement(N,null)))}}]),t}(s.a.Component),A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).searchUser=function(e){var t=e.target.value.toLowerCase();a.setState(function(e){return{searchValue:t,filteredUsers:e.users.filter(function(e){return e.fullname.toLowerCase().includes(t)})}})},a.handleDelete=function(e){if(JSON.parse(localStorage.getItem("roles")).includes("superadmin")){if(window.confirm("Are you sure")){a.setState(function(){return{deleteLoading:{id:e,status:!0}}});var t=localStorage.getItem("token");E.a.delete("/api/admin/users/".concat(e),{headers:{"x-auth":t}}).then(function(t){t.data.user?a.setState(function(t){return{deleteLoading:{id:"",status:!1},users:t.users.filter(function(t){return t._id!==e}),filteredUsers:t.filteredUsers.filter(function(t){return t._id!==e})}}):a.setState(function(){return{deleteLoading:{id:"",status:!1},formMsg:{css:"danger",msg:"Something Went Wrong !"}}})})}}else window.alert("You don't have permission to delete")},a.state={users:[],filteredUsers:[],searchValue:"",isLoaded:!1,deleteLoading:{id:"",status:!1},formMsg:{css:"",msg:""}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){document.title="All Users";var e=JSON.parse(localStorage.getItem("roles"));e?!e.includes("admin")&&this.props.history.push("/login"):this.props.history.push("/login"),this.setState(function(){return{roles:e}})}},{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("roles")),a=localStorage.getItem("token");E.a.get("/api/admin/users",{headers:{"x-auth":a}}).then(function(a){e.setState(function(){return{users:t.includes("superadmin")?a.data:a.data.filter(function(e){return!e.roles.includes("superadmin")}),filteredUsers:t.includes("superadmin")?a.data:a.data.filter(function(e){return!e.roles.includes("superadmin")}),isLoaded:!0}})})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"expenses"},s.a.createElement("div",{className:"headTitle"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},s.a.createElement("h1",null,"Users - ",this.state.filteredUsers.length)),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"rightBtn"},s.a.createElement(d.b,{to:"/admin/users/add"},"Add User")))))),s.a.createElement("div",{className:"container"},this.state.isLoaded?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6"},this.state.formMsg.msg?s.a.createElement("p",{className:"text-".concat(this.state.formMsg.css)},this.state.formMsg.msg):""),s.a.createElement("div",{className:"col-md-6"},s.a.createElement("form",null,s.a.createElement("input",{className:"form-control search",type:"text",placeholder:"Search Here",onChange:this.searchUser,value:this.state.searchValue})))),s.a.createElement("div",{className:"tableCover"},s.a.createElement("table",{className:"table table-hover table-bordered"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Sl. No."),s.a.createElement("th",null,"Full Name"),s.a.createElement("th",null,"Userame"),s.a.createElement("th",null,"Email"),s.a.createElement("th",null,"Role"),s.a.createElement("th",null,"Status"),s.a.createElement("th",null,"Action"))),s.a.createElement("tbody",null,this.state.filteredUsers.length?this.state.filteredUsers.map(function(t,a){return s.a.createElement("tr",{key:t._id},s.a.createElement("td",null,a+1),s.a.createElement("td",null,t.fullname),s.a.createElement("td",{className:"noCap"},t.username),s.a.createElement("td",{className:"noCap"},t.email),s.a.createElement("td",null,t.roles.includes("superadmin")?"Super Admin":t.roles[0]),s.a.createElement("td",null,t.allowAccess?s.a.createElement("span",{className:"text-success"},"Approved"):s.a.createElement("span",{className:"text-danger"},"Not Approved")),s.a.createElement("td",null,s.a.createElement(d.b,{title:"Edit",to:"users/edit/".concat(t._id)},s.a.createElement("i",{className:"fa fa-pencil text-primary"})),s.a.createElement("button",{title:"delete",onClick:function(){e.handleDelete(t._id)}},e.state.deleteLoading.id===t._id&&e.state.deleteLoading.status?s.a.createElement("i",{className:"fa fa-spin text-danger fa-spinner"}):s.a.createElement("i",{className:"fa fa-trash text-danger"}))))}):s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"6",className:"text-center"}," No Users Found ")))))):s.a.createElement("div",{className:"text-center mt-5 mb-5"},s.a.createElement(N,null))))}}]),t}(s.a.Component),U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t={name:a.state.name};a.props.handleSubmit(t)},a.handleChange=function(e){e.persist(),a.setState(function(){return Object(b.a)({},e.target.name,e.target.value)})},a.state={name:e.category?e.category.name:"",errors:{}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-3"},s.a.createElement("label",{className:"label"},"Category")),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("input",{type:"text",className:"form-control field",placeholder:"Enter Category",name:"name",value:this.state.name,onChange:this.handleChange})),s.a.createElement("div",{className:"col-md-5"},this.props.errors.name?s.a.createElement("p",{className:"text-danger"},this.props.errors.name.message):""),s.a.createElement("div",{className:"col-md-3"}),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("button",{className:"btn"},this.props.submitLoading?s.a.createElement("i",{className:"fa fa-spin fa-spinner"}):"".concat(this.props.title," Category"))))))}}]),t}(s.a.Component),I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){a.setState(function(){return{submitLoading:!0}});var t=localStorage.getItem("token");E.a.post("/api/admin/categories",e,{headers:{"x-auth":t}}).then(function(e){console.log(e.data),e.data.errors?a.setState(function(){return{errors:e.data.errors,submitLoading:!1}}):a.props.history.push("/admin/categories")}).catch(function(e){console.log("error",e)})},a.state={submitLoading:!1,errors:{name:""}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){document.title="Add Category";var e=JSON.parse(localStorage.getItem("roles"));e?!e.includes("admin")&&this.props.history.push("/login"):this.props.history.push("/login")}},{key:"render",value:function(){return s.a.createElement("div",{className:"expenses"},s.a.createElement("div",{className:"headTitle"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},s.a.createElement("h1",null,"Add Category")),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"rightBtn"},s.a.createElement(d.b,{to:"/admin/categories"},"Go Back")))))),s.a.createElement("div",{className:"container"},s.a.createElement(U,{title:"Add",handleSubmit:this.handleSubmit,submitLoading:this.state.submitLoading,errors:this.state.errors})))}}]),t}(s.a.Component),_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){a.setState(function(){return{submitLoading:!0}});var t=a.props.match.params.id,n=localStorage.getItem("token");E.a.put("/api/admin/categories/".concat(t),e,{headers:{"x-auth":n}}).then(function(e){console.log(e.data),e.data.errors?a.setState(function(){return{submitLoading:!1,errors:e.data.errors}}):a.props.history.push("/admin/categories")}).catch(function(e){console.log("err",e)})},a.state={submitLoading:!1,errors:{name:""},isLoaded:!1,category:{}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){document.title="Edit Category";var e=JSON.parse(localStorage.getItem("roles"));e?!e.includes("admin")&&this.props.history.push("/login"):this.props.history.push("/login")}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,a=localStorage.getItem("token");E.a.get("/api/admin/categories/".concat(t),{headers:{"x-auth":a}}).then(function(t){t.data.category&&e.setState(function(){return{category:t.data.category,isLoaded:!0}})}).catch(function(e){console.log("error",e)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"expenses"},this.state.isLoaded?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"headTitle"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},s.a.createElement("h1",null,"Edit Category")),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"rightBtn"},s.a.createElement(d.b,{to:"/admin/categories"},"Go Back")))))),s.a.createElement("div",{className:"container"},s.a.createElement(U,{title:"Update",handleSubmit:this.handleSubmit,submitLoading:this.state.submitLoading,errors:this.state.errors,category:this.state.category}))):s.a.createElement("div",{className:"text-center mt-5 mb-5"},s.a.createElement(N,null)))}}]),t}(s.a.Component),M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).searchCategory=function(e){var t=e.target.value.toLowerCase();a.setState(function(e){return{searchValue:t,filteredCategories:e.categories.filter(function(e){return e.name.toLowerCase().includes(t)})}})},a.handleDelete=function(e){if(JSON.parse(localStorage.getItem("roles")).includes("superadmin")){if(window.confirm("Are you sure")){a.setState(function(){return{deleteLoading:{id:e,status:!0}}});var t=localStorage.getItem("token");E.a.delete("/api/admin/categories/".concat(e),{headers:{"x-auth":t}}).then(function(t){t.data.category?a.setState(function(t){return{deleteLoading:{id:"",status:!1},categories:t.categories.filter(function(t){return t._id!==e}),filteredCategories:t.filteredCategories.filter(function(t){return t._id!==e})}}):a.setState(function(){return{deleteLoading:{id:"",status:!1},formMsg:{css:"danger",msg:"Something Went Wrong !"}}})})}}else window.alert("You don't have permission to delete")},a.state={categories:[],filteredCategories:[],searchValue:"",isLoaded:!1,deleteLoading:{id:"",status:!1},formMsg:{css:"",msg:""}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){document.title="All Categories";var e=JSON.parse(localStorage.getItem("roles"));e?!e.includes("admin")&&this.props.history.push("/login"):this.props.history.push("/login")}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");E.a.get("/api/admin/categories",{headers:{"x-auth":t}}).then(function(t){e.setState(function(){return{categories:t.data,filteredCategories:t.data,isLoaded:!0}})})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"expenses"},s.a.createElement("div",{className:"headTitle"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},s.a.createElement("h1",null,"Categories - ",this.state.filteredCategories.length)),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"rightBtn"},s.a.createElement(d.b,{to:"/admin/categories/add"},"Add Category")))))),s.a.createElement("div",{className:"container"},this.state.isLoaded?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6"},this.state.formMsg.msg?s.a.createElement("p",{className:"text-".concat(this.state.formMsg.css)},this.state.formMsg.msg):""),s.a.createElement("div",{className:"col-md-6"},s.a.createElement("form",null,s.a.createElement("input",{className:"form-control search",type:"text",placeholder:"Search Here",onChange:this.searchCategory,value:this.state.searchValue})))),s.a.createElement("div",{className:"tableCover"},s.a.createElement("table",{className:"table table-hover table-bordered"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Sl. No."),s.a.createElement("th",null,"Category"),s.a.createElement("th",null,"Action"))),s.a.createElement("tbody",null,this.state.filteredCategories.length?this.state.filteredCategories.map(function(t,a){return s.a.createElement("tr",{key:t._id},s.a.createElement("td",null,a+1),s.a.createElement("td",null,t.name),s.a.createElement("td",null,s.a.createElement(d.b,{title:"Edit",to:"/admin/categories/edit/".concat(t._id)},s.a.createElement("i",{className:"fa fa-pencil text-primary"})),s.a.createElement("button",{title:"delete",onClick:function(){e.handleDelete(t._id)}},e.state.deleteLoading.id===t._id&&e.state.deleteLoading.status?s.a.createElement("i",{className:"fa fa-spin text-danger fa-spinner"}):s.a.createElement("i",{className:"fa fa-trash text-danger"}))))}):s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"3",className:"text-center"}," No Category Found ")))))):s.a.createElement("div",{className:"text-center mt-5 mb-5"},s.a.createElement(N,null))))}}]),t}(s.a.Component),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){e.persist(),a.setState(function(){return Object(b.a)({},e.target.name,e.target.value)})},a.handleSubmit=function(e){e.preventDefault();var t={fullname:a.state.fullname,username:a.state.username,email:a.state.email,password:a.state.password};a.setState(function(){return{submitBtn:""}}),E.a.post("/api/users/register",t).then(function(e){console.log(e.data),e.data.errors?a.setState(function(){return{errors:e.data.errors,submitBtn:"Register"}}):(a.props.handleFormStatus(!0,"success","Registered Successfully"),a.props.history.push("/login"))})},a.state={fullname:"",username:"",email:"",password:"",errors:{},submitBtn:"Register"},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){document.title="Register"}},{key:"render",value:function(){return s.a.createElement("div",{className:"loginBlock"},s.a.createElement("div",null,s.a.createElement("h2",null,"Register "),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{type:"text",name:"fullname",value:this.state.fullname,onChange:this.handleChange,className:"form-control",placeholder:"Full Name"}),this.state.errors.fullname&&s.a.createElement("p",{className:"text-danger"},this.state.errors.fullname.message),s.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,className:"form-control",placeholder:"Username"}),this.state.errors.username&&s.a.createElement("p",{className:"text-danger"},this.state.errors.username.message),s.a.createElement("input",{type:"text",name:"email",value:this.state.email,onChange:this.handleChange,className:"form-control",placeholder:"Email"}),this.state.errors.email&&s.a.createElement("p",{className:"text-danger"},this.state.errors.email.message),s.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,className:"form-control",placeholder:"Password"}),this.state.errors.password&&s.a.createElement("p",{className:"text-danger"},this.state.errors.password.message),s.a.createElement("div",{className:"loginFooter"},s.a.createElement("button",{type:"submit",className:"btn"},"Register"===this.state.submitBtn?"Register":s.a.createElement("i",{className:"fa fa-spin fa-spinner"})),s.a.createElement(d.b,{to:"/login"},"Already have an account ?")))))}}]),t}(s.a.Component),F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t={username_email:a.state.username_email,password:a.state.password};a.setState(function(){return{submitBtn:""}}),a.props.handleFormStatus(!1,"",""),E.a.post("/api/users/login",t).then(function(e){e.data.errors?a.setState(function(){return{formStatus:{status:!0,msg:e.data.errors,css:"danger"},password:"",submitBtn:"Login"}}):(localStorage.setItem("token",e.data.token),localStorage.setItem("id",e.data.id),localStorage.setItem("roles",JSON.stringify(e.data.roles)),e.data.roles.includes("admin")?a.props.history.push("/admin/expenses"):a.props.history.push("/expenses"),a.props.handleAuthentication(!0))})},a.handleChange=function(e){e.persist(),a.setState(function(){return Object(b.a)({},e.target.name,e.target.value)})},a.state={username_email:"",password:"",formStatus:{status:e.formStatus.status,msg:e.formStatus.msg,css:e.formStatus.css},submitBtn:"Login"},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){document.title="Login"}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"loginBlock"},s.a.createElement("div",null,s.a.createElement("h2",null,"Login "),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{type:"text",name:"username_email",value:this.state.username_email,onChange:this.handleChange,className:"form-control",placeholder:"Username / Email"}),s.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,className:"form-control",placeholder:"Password"}),this.state.formStatus.status&&s.a.createElement("p",{className:"formStatus text-".concat(this.state.formStatus.css)},this.state.formStatus.msg),s.a.createElement("div",{className:"loginFooter"},s.a.createElement("button",{type:"submit",className:"btn"},"Login"===this.state.submitBtn?"Login":s.a.createElement("i",{className:"fa fa-spin fa-spinner"})),s.a.createElement(d.b,{to:"/register"},"Create an account"))))))}}]),t}(s.a.Component),D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleAuthentication=function(){a.setState(function(){return{isAuthenticated:!0}})},a.handleFormStatus=function(e,t,n){a.setState(function(){return{formStatus:{status:e,msg:n,css:t}}})},a.state={isAuthenticated:!1,roles:[],formStatus:{status:!1,msg:"",css:""}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token"),t=JSON.parse(localStorage.getItem("roles"));e&&t&&this.setState(function(){return{isAuthenticated:!0,roles:t}})}},{key:"render",value:function(){var e=this;return s.a.createElement(d.a,null,s.a.createElement("div",{className:"wrapper"},s.a.createElement(g,{isAuthenticated:this.state.isAuthenticated}),s.a.createElement("div",{className:"body"},s.a.createElement(p.c,null,s.a.createElement(p.a,{path:"/",component:f,exact:!0}),s.a.createElement(p.a,{path:"/admin/expenses",component:O,exact:!0}),s.a.createElement(p.a,{path:"/admin/expenses/add",component:x,exact:!0}),s.a.createElement(p.a,{path:"/admin/expenses/view/:id",component:j,exact:!0}),s.a.createElement(p.a,{path:"/admin/expenses/edit/:id",component:C,exact:!0}),s.a.createElement(p.a,{path:"/admin/users",component:A,exact:!0}),s.a.createElement(p.a,{path:"/admin/users/add",component:k,exact:!0}),s.a.createElement(p.a,{path:"/admin/users/edit/:id",component:L,exact:!0}),s.a.createElement(p.a,{path:"/admin/categories",component:M,exact:!0}),s.a.createElement(p.a,{path:"/admin/categories/add",component:I,exact:!0}),s.a.createElement(p.a,{path:"/admin/categories/edit/:id",component:_,exact:!0}),s.a.createElement(p.a,{path:"/expenses",component:O,exact:!0}),s.a.createElement(p.a,{path:"/expenses/add",component:x,exact:!0}),s.a.createElement(p.a,{path:"/expenses/view/:id",component:j,exact:!0}),s.a.createElement(p.a,{path:"/expenses/edit/:id",component:C,exact:!0}),s.a.createElement(p.a,{path:"/login",render:function(t){return s.a.createElement(F,Object.assign({},t,{handleFormStatus:e.handleFormStatus,handleAuthentication:e.handleAuthentication,formStatus:e.state.formStatus,isAuthenticated:e.state.isAuthenticated}))}}),s.a.createElement(p.a,{path:"/register",render:function(t){return s.a.createElement(B,Object.assign({},t,{handleFormStatus:e.handleFormStatus}))}}),s.a.createElement(p.a,{path:"/logout",render:function(t){E.a.delete("/api/users/logout",{headers:{"x-auth":localStorage.getItem("token")}}).then(function(a){t.history.push("/login"),e.setState(function(){return{isAuthenticated:!1}}),localStorage.removeItem("token"),localStorage.removeItem("id"),localStorage.removeItem("roles")})}})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.d2e582bf.chunk.js.map